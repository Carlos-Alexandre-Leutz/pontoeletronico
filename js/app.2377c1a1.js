(function(){"use strict";var o={5514:function(o,a,t){var e=t(9963),r=t(6252);const n=(0,r._)("nav",null,null,-1);function i(o,a){const t=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n,(0,r.Wm)(t)],64)}var s=t(3744);const l={},u=(0,s.Z)(l,[["render",i]]);var c=u,d=t(2201),m=t(3577);const p=o=>((0,r.dD)("data-v-e5d002c2"),o=o(),(0,r.Cn)(),o),h={style:{width:"100%"}},f={class:"centered-div"},g={class:"navbar navbar-expand-lg bg-body-tertiary"},w={class:"container-fluid"},v=p((()=>(0,r._)("a",{class:"navbar-brand",href:"#"},"Many Controle de taréfas",-1))),b=p((()=>(0,r._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r._)("span",{class:"navbar-toggler-icon"})],-1))),k={class:"collapse navbar-collapse",id:"navbarSupportedContent"},y=p((()=>(0,r._)("ul",{class:"navbar-nav me-auto mb-2 mb-lg-0"},[(0,r._)("li",{class:"nav-item"},[(0,r._)("a",{class:"nav-link active","aria-current":"page",href:"#"},"Home")])],-1))),_={class:"d-flex",role:"search"},C={key:0};function z(o,a,t,e,n,i){const s=(0,r.up)("ClockInClockOut");return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",f,[(0,r._)("nav",g,[(0,r._)("div",w,[v,b,(0,r._)("div",k,[y,(0,r._)("form",_,[n.user?((0,r.wg)(),(0,r.iD)("p",C,"Olá, "+(0,m.zw)(n.user.displayName)+"!",1)):(0,r.kq)("",!0),(0,r._)("button",{class:"btn btn-outline-success",onClick:a[0]||(a[0]=(...o)=>i.logout&&i.logout(...o))}," Sair ")])])])]),(0,r.Wm)(s)])])}t(560);const D={style:{margin:"0 auto"}},F=(0,r._)("h1",null,"Marcação de Ponto Eletrônico",-1),I={class:"card"},M={class:"card-body"},T={class:"card-title"},H=(0,r._)("br",null,null,-1),O=(0,r._)("br",null,null,-1),S=(0,r._)("br",null,null,-1),U=(0,r._)("br",null,null,-1),x=(0,r._)("br",null,null,-1),E=["onClick"],P=["onClick"],q={key:0,class:"col-md-10"},A={class:"card"},N={class:"card-body"},j={class:"card-title"},B={class:"card-title"},L=(0,r._)("br",null,null,-1),Z=["onClick"],V=(0,r._)("br",null,null,-1);function $(o,a,t,e,n,i){const s=(0,r.up)("Filtro");return(0,r.wg)(),(0,r.iD)("div",D,[F,n.registros.length?((0,r.wg)(),(0,r.j4)(s,{key:0,tasks:n.registros},null,8,["tasks"])):(0,r.kq)("",!0),(0,r._)("button",{onClick:a[0]||(a[0]=(...o)=>i.iniciarPonto&&i.iniciarPonto(...o))},"Iniciar Periodo"),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.registros,(o=>((0,r.wg)(),(0,r.iD)("div",{key:o.userId,class:"col-md-10"},[(0,r._)("div",I,[(0,r._)("div",M,[(0,r._)("h5",T," Dia: "+(0,m.zw)(o.data.data.dia)+"/"+(0,m.zw)(o.data.data.mes)+"/"+(0,m.zw)(o.data.data.ano),1),H,(0,r.Uk)(" hora inicio: "+(0,m.zw)(o.data.horaInicio.horas)+":"+(0,m.zw)(o.data.horaInicio.minutos)+" ",1),O,(0,r.Uk)(" Resumo do dia: "+(0,m.zw)(i.getResume(o))+" ",1),S,i.timeSpentTask(o.data.horaInicio,o.data.horaFim)?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)(" Hora fim: "+(0,m.zw)(o.data.horaFim.horas)+":"+(0,m.zw)(o.data.horaFim.minutos)+" ",1),U],64)):(0,r.kq)("",!0),(0,r.Uk)(" Tempo gasto: "+(0,m.zw)(i.timeSpentTask(o.data.horaInicio,o.data.horaFim))+" ",1),x,i.timeSpentTask(o.data.horaInicio,o.data.horaFim)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:a=>i.pararPonto(o.key,o)}," Finalizar Periodo ",8,E)),i.validarDataMaiorHoje(o.data.data.dia,o.data.data.mes,o.data.data.ano)?((0,r.wg)(),(0,r.iD)("button",{key:2,onClick:a=>i.adiconarTarefa(o.key,o)}," adiconar Tarefa ",8,P)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tarefas.reverse(),((a,t)=>((0,r.wg)(),(0,r.iD)("div",{key:a},[a?((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",A,[(0,r._)("div",N,[(0,r._)("h4",j,(0,m.zw)(a.taskNumber),1),(0,r._)("h5",B,(0,m.zw)(a.descricao),1),(0,r.Uk)(" hora inicio: "+(0,m.zw)(a.horaInicio.horas)+":"+(0,m.zw)(a.horaInicio.minutos)+" ",1),i.tarefaFinalizada(a.horaInicio,a.horaFim)?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)(" Hora fim: "+(0,m.zw)(a.horaFim.horas)+":"+(0,m.zw)(a.horaFim.minutos)+" ",1),L],64)):(0,r.kq)("",!0),(0,r.Uk)(" Tempo gasto: "+(0,m.zw)(i.timeSpentTask(a.horaInicio,a.horaFim))+" ",1),i.tarefaFinalizada(a.horaInicio,a.horaFim)?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("button",{onClick:a=>i.finalizarTarefa(o.key,o,t)}," Finalizar Tarefa ",8,Z),V],64)):(0,r.kq)("",!0)])])])):(0,r.kq)("",!0)])))),128))])])])))),128))])}const R={class:"container mt-3"},Y={class:"row justify-content-end"},G={class:"col-md-4"},K={class:"input-group"},W={class:"input-group-append"};function J(o,a,t,n,i,s){return(0,r.wg)(),(0,r.iD)("div",R,[(0,r._)("div",Y,[(0,r._)("div",G,[(0,r._)("div",K,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",placeholder:"Digite aqui...","onUpdate:modelValue":a[0]||(a[0]=o=>i.viewModel.busca=o)},null,512),[[e.nr,i.viewModel.busca]]),(0,r._)("div",W,[(0,r._)("button",{onClick:a[1]||(a[1]=o=>s.buscarTempoGastoPorTarefa()),class:"btn btn-outline-secondary",type:"button"}," Buscar "),(0,r.Uk)(" "+(0,m.zw)(i.viewModel.result),1)])])])])])}var Q={props:{tasks:{type:Array,default:()=>[]}},data(){return{viewModel:{busca:"",result:"",data:""}}},mounted(){this.viewModel.data=this.tasks},methods:{buscarTempoGastoPorTarefa(){try{let o=0;this.viewModel.data.forEach((a=>{a.tarefas&&a.tarefas.forEach((a=>{if(console.log(a),a.descricao.toLowerCase().includes(this.viewModel.busca.toLowerCase())){const t=60*a.horaFim.horas+a.horaFim.minutos-(60*a.horaInicio.horas+a.horaInicio.minutos);o+=t}}))}));const a=Math.floor(o/60),t=o%60;this.viewModel.result=`${a}:${t}`}catch(o){console.error("Erro:",o)}}}};const X=(0,s.Z)(Q,[["render",J]]);var oo=X,ao=t(6071),to=t(7663),eo=t(6455),ro=t.n(eo),no={data(){return{registros:[]}},components:{Filtro:oo},methods:{iniciarPonto(){ro().fire({title:"Adicione o numero da tarefa que você vai iniciar",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!ro().isLoading()}).then((o=>{o.isConfirmed&&ro().fire({title:"Adicione a descrição",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!ro().isLoading()}).then((a=>{a.isConfirmed&&this.sendPonto(o.value,a.value)}))}))},async sendPonto(o,a){const t=(0,ao.v0)(),e=t.currentUser,r=(0,to.N8)(),n=(0,to.iH)(r,"pontos");try{let t=new Date,r={data:{dia:t.getDate(),mes:t.getMonth()+1,ano:t.getFullYear()},horaInicio:{horas:t.getHours(),minutos:t.getMinutes()},horaFim:{horas:t.getHours(),minutos:t.getMinutes()},tarefas:[]};const i={data:r,tarefas:[{taskNumber:o,descricao:a,horaInicio:{horas:t.getHours(),minutos:t.getMinutes()},horaFim:{horas:t.getHours(),minutos:t.getMinutes()}}]},s=(0,to.VF)(n);await(0,to.t8)(s,{...i,userId:e.uid}),console.log("Registro de ponto salvo com sucesso:",s.key),this.registros.reverse(),this.registros.push({...i,id:s.key}),this.registros.reverse()}catch(i){console.error("Erro ao marcar ponto:",i.message)}},async pararPonto(o,a){const t=(0,ao.v0)(),e=t.currentUser,r=(0,to.N8)(),n=(0,to.iH)(r,`pontos/${o}`);try{if(a.userId===e.uid){let t=new Date;a.data.horaFim={horas:t.getHours(),minutos:t.getMinutes()},await(0,to.t8)(n,a),console.log("Registro de ponto finalizado com sucesso:",o)}else console.warn("O registro não pertence ao usuário atual.")}catch(i){console.error("Erro ao finalizar ponto:",i.message)}},adiconarTarefa(o,a){let t=!1;a.tarefas.forEach((o=>{this.tarefaFinalizada(o.horaInicio,o.horaFim)&&(console.log("A tarefa "+o.descricao+" não foi finalizada, finalizar antes de iniciar outra"),t=!0,ro().fire({title:"a tarefa "+o.descricao+" não foi finalizada, finalizar antes de iniciar outra",confirmButtonText:"OK"}))})),t||ro().fire({title:"Adicione o numero da tarefa que você vai iniciar",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!ro().isLoading()}).then((t=>{t.isConfirmed&&ro().fire({title:"Adicione a descrição",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!ro().isLoading()}).then((e=>{e.isConfirmed&&this.sendTask(o,a,t.value,e.value)}))}))},async sendTask(o,a,t,e){const r=(0,ao.v0)(),n=r.currentUser,i=(0,to.N8)(),s=(0,to.iH)(i,`pontos/${o}`);try{if(a.userId===n.uid){let r=new Date;const n={taskNumber:t,descricao:e,horaInicio:{horas:r.getHours(),minutos:r.getMinutes()},horaFim:{horas:r.getHours(),minutos:r.getMinutes()}};a.tarefas.push(n),await(0,to.t8)(s,a),console.log("Registro de ponto finalizado com sucesso:",o)}else console.warn("O registro não pertence ao usuário atual.")}catch(l){console.error("Erro ao finalizar ponto:",l.message)}},async finalizarTarefa(o,a,t){const e=(0,ao.v0)(),r=e.currentUser;let n=new Date;const i=(0,to.N8)(),s=(0,to.iH)(i,`pontos/${o}`);try{a.userId===r.uid?(a.tarefas[t].horaFim={horas:n.getHours(),minutos:n.getMinutes()},await(0,to.t8)(s,a),console.log("Registro de ponto finalizado com sucesso:",o)):console.warn("O registro não pertence ao usuário atual.")}catch(l){console.error("Erro ao finalizar ponto:",l.message)}},timeSpentTask(o,a){let t=new Date;t.setHours(o.horas),t.setMinutes(o.minutos);let e=new Date;e.setHours(a.horas),e.setMinutes(a.minutos);let r=e-t,n=r/6e4;return n?this.dataFormat(n):0},dataFormat(o){let a=Math.floor(o/60),t=o%60,e=a<10?"0"+a:a,r=t<10?"0"+t:t;return e+":"+r},async pausarPonto(){},validarDataMaiorHoje(o,a,t){const e=new Date,r=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return o==i&&a==n&&t==r},tarefaFinalizada(o,a){let t=o.horas.toString()+o.minutos.toString(),e=a.horas.toString()+a.minutos.toString();return t==e},getResume(o){let a="Você fez as taréfas ";return o.tarefas.forEach((o=>{a+=o.taskNumber+", "})),a}},async created(){const o=(0,to.N8)(),a=(0,to.iH)(o,"pontos"),t=await(0,to.U2)(a,"value"),e=[];t.exists()&&t.forEach((o=>{const a=o.key,t=o.val();e.push({key:a,...t})})),this.registros=e.reverse()}};const io=(0,s.Z)(no,[["render",$]]);var so=io,lo={data(){return{user:null}},created(){const o=(0,ao.v0)();(0,ao.Aj)(o,(o=>{o?this.user=o:this.$router.push("/login")}))},components:{ClockInClockOut:so},methods:{logout(){const o=(0,ao.v0)();(0,ao.w7)(o).then((()=>{console.log("Usuário deslogado com sucesso"),this.$router.push("/login")})).catch((o=>{console.error("Erro ao deslogar:",o.message)}))}}};const uo=(0,s.Z)(lo,[["render",z],["__scopeId","data-v-e5d002c2"]]);var co=uo;const mo=(0,r._)("h1",null,"Login",-1),po=(0,r._)("label",{for:"email"},"Email:",-1),ho=(0,r._)("label",{for:"password"},"Senha:",-1),fo=(0,r._)("button",{type:"submit"},"Entrar",-1);function go(o,a,t,n,i,s){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[mo,(0,r._)("form",{onSubmit:a[2]||(a[2]=(0,e.iM)(((...o)=>s.login&&s.login(...o)),["prevent"]))},[po,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=o=>i.email=o),required:""},null,512),[[e.nr,i.email]]),ho,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>i.password=o),required:""},null,512),[[e.nr,i.password]]),fo],32),(0,r.Wm)(l,{to:"/newAccount"},{default:(0,r.w5)((()=>[(0,r.Uk)("Não tem conta?")])),_:1})])}var wo={data(){return{email:"",password:""}},methods:{async login(){const o=(0,ao.v0)();try{await(0,ao.e5)(o,this.email,this.password),console.log("Usuário autenticado com sucesso"),this.$router.push("/dashboard")}catch(a){console.error("Erro ao autenticar:",a.message)}}}};const vo=(0,s.Z)(wo,[["render",go]]);var bo=vo;const ko=(0,r._)("h1",null,"Criar Nova Conta",-1),yo=(0,r._)("label",{for:"name"},"Nome:",-1),_o=(0,r._)("label",{for:"email"},"Email:",-1),Co=(0,r._)("label",{for:"password"},"Senha:",-1),zo=(0,r._)("button",{type:"submit"},"Criar Conta",-1);function Do(o,a,t,n,i,s){return(0,r.wg)(),(0,r.iD)("div",null,[ko,(0,r._)("form",{onSubmit:a[3]||(a[3]=(0,e.iM)(((...o)=>s.signup&&s.signup(...o)),["prevent"]))},[yo,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>i.name=o),required:""},null,512),[[e.nr,i.name]]),_o,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":a[1]||(a[1]=o=>i.email=o),required:""},null,512),[[e.nr,i.email]]),Co,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=o=>i.password=o),required:""},null,512),[[e.nr,i.password]]),zo],32)])}var Fo={data(){return{name:"",email:"",password:""}},methods:{async signup(){const o=(0,ao.v0)();try{const a=await(0,ao.Xb)(o,this.email,this.password);await(0,ao.ck)(a.user,{displayName:this.name}),console.log("Usuário criado com sucesso"),this.$router.push("/dashboard")}catch(a){console.error("Erro ao criar usuário:",a.message)}}}};const Io=(0,s.Z)(Fo,[["render",Do]]);var Mo=Io;const To=[{path:"",name:"home2",component:co},{path:"/",name:"home",component:co},{path:"/login",name:"login",component:bo},{path:"/newAccount",name:"newAccount",component:Mo},{path:"/dashboard",name:"home",component:co}],Ho=(0,d.p7)({history:(0,d.PO)("/"),routes:To});var Oo=Ho,So=t(3907),Uo=(0,So.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),xo=t(5503);const Eo={apiKey:"AIzaSyDUh3GJHdsSiDEJnfZGKfZIPwkQsGctM_o",authDomain:"ponto-eletronico-alexandre.firebaseapp.com",projectId:"ponto-eletronico-alexandre",storageBucket:"ponto-eletronico-alexandre.appspot.com",messagingSenderId:"301921361900",appId:"1:301921361900:web:90d661a18f391b393e6ac9",measurementId:"G-VRCEPTZET0"};(0,xo.ZF)(Eo),(0,e.ri)(c).use(Uo).use(Oo).mount("#app")}},a={};function t(e){var r=a[e];if(void 0!==r)return r.exports;var n=a[e]={exports:{}};return o[e].call(n.exports,n,n.exports,t),n.exports}t.m=o,function(){var o=[];t.O=function(a,e,r,n){if(!e){var i=1/0;for(c=0;c<o.length;c++){e=o[c][0],r=o[c][1],n=o[c][2];for(var s=!0,l=0;l<e.length;l++)(!1&n||i>=n)&&Object.keys(t.O).every((function(o){return t.O[o](e[l])}))?e.splice(l--,1):(s=!1,n<i&&(i=n));if(s){o.splice(c--,1);var u=r();void 0!==u&&(a=u)}}return a}n=n||0;for(var c=o.length;c>0&&o[c-1][2]>n;c--)o[c]=o[c-1];o[c]=[e,r,n]}}(),function(){t.n=function(o){var a=o&&o.__esModule?function(){return o["default"]}:function(){return o};return t.d(a,{a:a}),a}}(),function(){t.d=function(o,a){for(var e in a)t.o(a,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:a[e]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){t.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)}}(),function(){var o={143:0};t.O.j=function(a){return 0===o[a]};var a=function(a,e){var r,n,i=e[0],s=e[1],l=e[2],u=0;if(i.some((function(a){return 0!==o[a]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(l)var c=l(t)}for(a&&a(e);u<i.length;u++)n=i[u],t.o(o,n)&&o[n]&&o[n][0](),o[n]=0;return t.O(c)},e=self["webpackChunkponto_eletronico"]=self["webpackChunkponto_eletronico"]||[];e.forEach(a.bind(null,0)),e.push=a.bind(null,e.push.bind(e))}();var e=t.O(void 0,[998],(function(){return t(5514)}));e=t.O(e)})();
//# sourceMappingURL=app.2377c1a1.js.map