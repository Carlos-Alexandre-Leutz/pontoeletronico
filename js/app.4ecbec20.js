(function(){"use strict";var o={617:function(o,a,t){var e=t(9242),n=t(3396);const r=(0,n._)("nav",null,null,-1);function i(o,a){const t=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[r,(0,n.Wm)(t)],64)}var s=t(89);const l={},c=(0,s.Z)(l,[["render",i]]);var u=c,d=t(2483),m=t(7139);const p=o=>((0,n.dD)("data-v-e5d002c2"),o=o(),(0,n.Cn)(),o),h={style:{width:"100%"}},f={class:"centered-div"},g={class:"navbar navbar-expand-lg bg-body-tertiary"},v={class:"container-fluid"},w=p((()=>(0,n._)("a",{class:"navbar-brand",href:"#"},"Many Controle de taréfas",-1))),b=p((()=>(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1))),k={class:"collapse navbar-collapse",id:"navbarSupportedContent"},y=p((()=>(0,n._)("ul",{class:"navbar-nav me-auto mb-2 mb-lg-0"},[(0,n._)("li",{class:"nav-item"},[(0,n._)("a",{class:"nav-link active","aria-current":"page",href:"#"},"Home")])],-1))),_={class:"d-flex",role:"search"},C={key:0};function z(o,a,t,e,r,i){const s=(0,n.up)("ClockInClockOut");return(0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",f,[(0,n._)("nav",g,[(0,n._)("div",v,[w,b,(0,n._)("div",k,[y,(0,n._)("form",_,[r.user?((0,n.wg)(),(0,n.iD)("p",C,"Olá, "+(0,m.zw)(r.user.displayName)+"!",1)):(0,n.kq)("",!0),(0,n._)("button",{class:"btn btn-outline-success",onClick:a[0]||(a[0]=(...o)=>i.logout&&i.logout(...o))}," Sair ")])])])]),(0,n.Wm)(s)])])}t(560);const D={style:{margin:"0 auto"}},T=(0,n._)("h1",null,"Marcação de Ponto Eletrônico",-1),I={class:"card"},M={class:"card-body"},F={class:"card-title"},H=(0,n._)("br",null,null,-1),O=(0,n._)("br",null,null,-1),U=(0,n._)("br",null,null,-1),S=(0,n._)("br",null,null,-1),x=["onClick"],E=["onClick"],P={key:0,class:"col-md-10"},q={class:"card"},A={class:"card-body"},j={class:"card-title"},N={class:"card-title"},Z=(0,n._)("br",null,null,-1),B=["onClick"],L=(0,n._)("br",null,null,-1);function $(o,a,t,e,r,i){const s=(0,n.up)("Filtro");return(0,n.wg)(),(0,n.iD)("div",D,[T,r.registros.length?((0,n.wg)(),(0,n.j4)(s,{key:0,tasks:r.registros},null,8,["tasks"])):(0,n.kq)("",!0),(0,n._)("button",{onClick:a[0]||(a[0]=(...o)=>i.iniciarPonto&&i.iniciarPonto(...o))},"Iniciar Periodo"),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.registros,(o=>((0,n.wg)(),(0,n.iD)("div",{key:o.userId,class:"col-md-10"},[(0,n._)("div",I,[(0,n._)("div",M,[(0,n._)("h5",F," Dia: "+(0,m.zw)(o.data.data.dia)+"/"+(0,m.zw)(o.data.data.mes)+"/"+(0,m.zw)(o.data.data.ano),1),H,(0,n.Uk)(" hora inicio: "+(0,m.zw)(o.data.horaInicio.horas)+":"+(0,m.zw)(o.data.horaInicio.minutos)+" ",1),O,i.timeSpentTask(o.data.horaInicio,o.data.horaFim)?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)(" Hora fim: "+(0,m.zw)(o.data.horaFim.horas)+":"+(0,m.zw)(o.data.horaFim.minutos)+" ",1),U],64)):(0,n.kq)("",!0),(0,n.Uk)(" Tempo gasto: "+(0,m.zw)(i.timeSpentTask(o.data.horaInicio,o.data.horaFim))+" ",1),S,i.timeSpentTask(o.data.horaInicio,o.data.horaFim)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:a=>i.pararPonto(o.key,o)}," Finalizar Periodo ",8,x)),i.validarDataMaiorHoje(o.data.data.dia,o.data.data.mes,o.data.data.ano)?((0,n.wg)(),(0,n.iD)("button",{key:2,onClick:a=>i.adiconarTarefa(o.key,o)}," adiconar Tarefa ",8,E)):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.tarefas,((a,t)=>((0,n.wg)(),(0,n.iD)("div",{key:a},[a?((0,n.wg)(),(0,n.iD)("div",P,[(0,n._)("div",q,[(0,n._)("div",A,[(0,n._)("h4",j,(0,m.zw)(a.taskNumber),1),(0,n._)("h5",N,(0,m.zw)(a.descricao),1),(0,n.Uk)(" hora inicio: "+(0,m.zw)(a.horaInicio.horas)+":"+(0,m.zw)(a.horaInicio.minutos)+" ",1),i.timeSpentTask(a.horaInicio,a.horaFim)?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)(" Hora fim: "+(0,m.zw)(a.horaFim.horas)+":"+(0,m.zw)(a.horaFim.minutos)+" ",1),Z],64)):(0,n.kq)("",!0),(0,n.Uk)(" Tempo gasto: "+(0,m.zw)(i.timeSpentTask(a.horaInicio,a.horaFim))+" ",1),i.timeSpentTask(a.horaInicio,a.horaFim)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n._)("button",{onClick:a=>i.finalizarTarefa(o.key,o,t)}," Finalizar Tarefa ",8,B),L],64))])])])):(0,n.kq)("",!0)])))),128))])])])))),128))])}const V={class:"container mt-3"},Y={class:"row justify-content-end"},G={class:"col-md-4"},K={class:"input-group"},R={class:"input-group-append"};function W(o,a,t,r,i,s){return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",Y,[(0,n._)("div",G,[(0,n._)("div",K,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"Digite aqui...","onUpdate:modelValue":a[0]||(a[0]=o=>i.viewModel.busca=o)},null,512),[[e.nr,i.viewModel.busca]]),(0,n._)("div",R,[(0,n._)("button",{onClick:a[1]||(a[1]=o=>s.buscarTempoGastoPorTarefa()),class:"btn btn-outline-secondary",type:"button"}," Buscar "),(0,n.Uk)(" "+(0,m.zw)(i.viewModel.result),1)])])])])])}var J={props:{tasks:{type:Array,default:()=>[]}},data(){return{viewModel:{busca:"",result:"",data:""}}},mounted(){this.viewModel.data=this.tasks},methods:{buscarTempoGastoPorTarefa(){try{let o=0;this.viewModel.data.forEach((a=>{a.tarefas&&a.tarefas.forEach((a=>{if(console.log(a),a.descricao.toLowerCase().includes(this.viewModel.busca.toLowerCase())){const t=60*a.horaFim.horas+a.horaFim.minutos-(60*a.horaInicio.horas+a.horaInicio.minutos);o+=t}}))}));const a=Math.floor(o/60),t=o%60;this.viewModel.result=`${a}:${t}`}catch(o){console.error("Erro:",o)}}}};const Q=(0,s.Z)(J,[["render",W]]);var X=Q,oo=t(9506),ao=t(1178),to=t(2492),eo=t.n(to),no={data(){return{registros:[]}},components:{Filtro:X},methods:{iniciarPonto(){eo().fire({title:"Adicione o numero da tarefa que você vai iniciar",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!eo().isLoading()}).then((o=>{o.isConfirmed&&eo().fire({title:"Adicione a descrição",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!eo().isLoading()}).then((a=>{a.isConfirmed&&this.sendPonto(o.value,a.value)}))}))},async sendPonto(o,a){const t=(0,oo.v0)(),e=t.currentUser,n=(0,ao.N8)(),r=(0,ao.iH)(n,"pontos");try{let t=new Date,n={data:{dia:t.getDate(),mes:t.getMonth()+1,ano:t.getFullYear()},horaInicio:{horas:t.getHours(),minutos:t.getMinutes()},horaFim:{horas:t.getHours(),minutos:t.getMinutes()},tarefas:[]};const i={data:n,tarefas:[{taskNumber:o,descricao:a,horaInicio:{horas:t.getHours(),minutos:t.getMinutes()},horaFim:{horas:t.getHours(),minutos:t.getMinutes()}}]},s=(0,ao.VF)(r);await(0,ao.t8)(s,{...i,userId:e.uid}),console.log("Registro de ponto salvo com sucesso:",s.key),this.registros.reverse(),this.registros.push({...i,id:s.key}),this.registros.reverse()}catch(i){console.error("Erro ao marcar ponto:",i.message)}},async pararPonto(o,a){const t=(0,oo.v0)(),e=t.currentUser,n=(0,ao.N8)(),r=(0,ao.iH)(n,`pontos/${o}`);try{if(a.userId===e.uid){let t=new Date;a.data.horaFim={horas:t.getHours(),minutos:t.getMinutes()},await(0,ao.t8)(r,a),console.log("Registro de ponto finalizado com sucesso:",o)}else console.warn("O registro não pertence ao usuário atual.")}catch(i){console.error("Erro ao finalizar ponto:",i.message)}},adiconarTarefa(o,a){let t=!1;a.tarefas.forEach((o=>{console.log(o),this.timeSpentTask(o.horaInicio,o.horaFim)||(console.log("A tarefa "+o.descricao+" não foi finalizada, finalizar antes de iniciar outra"),t=!0,eo().fire({title:"a tarefa "+o.descricao+" não foi finalizada, finalizar antes de iniciar outra",confirmButtonText:"OK"}))})),t||eo().fire({title:"Adicione o nome da tarefa que você vai iniciar",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Salvar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!eo().isLoading()}).then((t=>{t.isConfirmed&&this.sendTask(o,a,t.value)}))},async sendTask(o,a,t){const e=(0,oo.v0)(),n=e.currentUser,r=(0,ao.N8)(),i=(0,ao.iH)(r,`pontos/${o}`);console.log(t);try{if(console.log(t),a.userId===n.uid){let e=new Date;console.log(t);const n={descricao:t,horaInicio:{horas:e.getHours(),minutos:e.getMinutes()},horaFim:{horas:e.getHours(),minutos:e.getMinutes()}};console.log(a.data),a.tarefas.push(n),await(0,ao.t8)(i,a),console.log("Registro de ponto finalizado com sucesso:",o)}else console.warn("O registro não pertence ao usuário atual.")}catch(s){console.error("Erro ao finalizar ponto:",s.message)}},async finalizarTarefa(o,a,t){const e=(0,oo.v0)(),n=e.currentUser;let r=new Date;const i=(0,ao.N8)(),s=(0,ao.iH)(i,`pontos/${o}`);try{a.userId===n.uid?(console.log(a.tarefas[t].horaFim),a.tarefas[t].horaFim={horas:r.getHours(),minutos:r.getMinutes()},await(0,ao.t8)(s,a),console.log("Registro de ponto finalizado com sucesso:",o)):console.warn("O registro não pertence ao usuário atual.")}catch(l){console.error("Erro ao finalizar ponto:",l.message)}},timeSpentTask(o,a){let t=new Date;t.setHours(o.horas),t.setMinutes(o.minutos);let e=new Date;e.setHours(a.horas),e.setMinutes(a.minutos);let n=e-t,r=n/6e4;return r?this.dataFormat(r):0},dataFormat(o){let a=Math.floor(o/60),t=o%60,e=a<10?"0"+a:a,n=t<10?"0"+t:t;return e+":"+n},async pausarPonto(){},validarDataMaiorHoje(o,a,t){const e=new Date,n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return o==i&&a==r&&t==n}},async created(){const o=(0,ao.N8)(),a=(0,ao.iH)(o,"pontos"),t=await(0,ao.U2)(a,"value"),e=[];t.exists()&&t.forEach((o=>{const a=o.key,t=o.val();e.push({key:a,...t})})),this.registros=e.reverse()}};const ro=(0,s.Z)(no,[["render",$]]);var io=ro,so={data(){return{user:null}},created(){const o=(0,oo.v0)();(0,oo.Aj)(o,(o=>{o?this.user=o:this.$router.push("/login")}))},components:{ClockInClockOut:io},methods:{logout(){const o=(0,oo.v0)();(0,oo.w7)(o).then((()=>{console.log("Usuário deslogado com sucesso"),this.$router.push("/login")})).catch((o=>{console.error("Erro ao deslogar:",o.message)}))}}};const lo=(0,s.Z)(so,[["render",z],["__scopeId","data-v-e5d002c2"]]);var co=lo;const uo=(0,n._)("h1",null,"Login",-1),mo=(0,n._)("label",{for:"email"},"Email:",-1),po=(0,n._)("label",{for:"password"},"Senha:",-1),ho=(0,n._)("button",{type:"submit"},"Entrar",-1);function fo(o,a,t,r,i,s){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[uo,(0,n._)("form",{onSubmit:a[2]||(a[2]=(0,e.iM)(((...o)=>s.login&&s.login(...o)),["prevent"]))},[mo,(0,n.wy)((0,n._)("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=o=>i.email=o),required:""},null,512),[[e.nr,i.email]]),po,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>i.password=o),required:""},null,512),[[e.nr,i.password]]),ho],32),(0,n.Wm)(l,{to:"/newAccount"},{default:(0,n.w5)((()=>[(0,n.Uk)("Não tem conta?")])),_:1})])}var go={data(){return{email:"",password:""}},methods:{async login(){const o=(0,oo.v0)();try{await(0,oo.e5)(o,this.email,this.password),console.log("Usuário autenticado com sucesso"),this.$router.push("/dashboard")}catch(a){console.error("Erro ao autenticar:",a.message)}}}};const vo=(0,s.Z)(go,[["render",fo]]);var wo=vo;const bo=(0,n._)("h1",null,"Criar Nova Conta",-1),ko=(0,n._)("label",{for:"name"},"Nome:",-1),yo=(0,n._)("label",{for:"email"},"Email:",-1),_o=(0,n._)("label",{for:"password"},"Senha:",-1),Co=(0,n._)("button",{type:"submit"},"Criar Conta",-1);function zo(o,a,t,r,i,s){return(0,n.wg)(),(0,n.iD)("div",null,[bo,(0,n._)("form",{onSubmit:a[3]||(a[3]=(0,e.iM)(((...o)=>s.signup&&s.signup(...o)),["prevent"]))},[ko,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>i.name=o),required:""},null,512),[[e.nr,i.name]]),yo,(0,n.wy)((0,n._)("input",{type:"email","onUpdate:modelValue":a[1]||(a[1]=o=>i.email=o),required:""},null,512),[[e.nr,i.email]]),_o,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=o=>i.password=o),required:""},null,512),[[e.nr,i.password]]),Co],32)])}var Do={data(){return{name:"",email:"",password:""}},methods:{async signup(){const o=(0,oo.v0)();try{const a=await(0,oo.Xb)(o,this.email,this.password);await(0,oo.ck)(a.user,{displayName:this.name}),console.log("Usuário criado com sucesso"),this.$router.push("/dashboard")}catch(a){console.error("Erro ao criar usuário:",a.message)}}}};const To=(0,s.Z)(Do,[["render",zo]]);var Io=To;const Mo=[{path:"",name:"home2",component:co},{path:"/",name:"home",component:co},{path:"/login",name:"login",component:wo},{path:"/newAccount",name:"newAccount",component:Io},{path:"/dashboard",name:"home",component:co}],Fo=(0,d.p7)({history:(0,d.PO)("/pontoeletronico/"),routes:Mo});var Ho=Fo,Oo=t(65),Uo=(0,Oo.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),So=t(4275);const xo={apiKey:"AIzaSyDUh3GJHdsSiDEJnfZGKfZIPwkQsGctM_o",authDomain:"ponto-eletronico-alexandre.firebaseapp.com",projectId:"ponto-eletronico-alexandre",storageBucket:"ponto-eletronico-alexandre.appspot.com",messagingSenderId:"301921361900",appId:"1:301921361900:web:90d661a18f391b393e6ac9",measurementId:"G-VRCEPTZET0"};(0,So.ZF)(xo),(0,e.ri)(u).use(Uo).use(Ho).mount("#app")}},a={};function t(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return o[e].call(r.exports,r,r.exports,t),r.exports}t.m=o,function(){var o=[];t.O=function(a,e,n,r){if(!e){var i=1/0;for(u=0;u<o.length;u++){e=o[u][0],n=o[u][1],r=o[u][2];for(var s=!0,l=0;l<e.length;l++)(!1&r||i>=r)&&Object.keys(t.O).every((function(o){return t.O[o](e[l])}))?e.splice(l--,1):(s=!1,r<i&&(i=r));if(s){o.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}r=r||0;for(var u=o.length;u>0&&o[u-1][2]>r;u--)o[u]=o[u-1];o[u]=[e,n,r]}}(),function(){t.n=function(o){var a=o&&o.__esModule?function(){return o["default"]}:function(){return o};return t.d(a,{a:a}),a}}(),function(){t.d=function(o,a){for(var e in a)t.o(a,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:a[e]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){t.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)}}(),function(){var o={143:0};t.O.j=function(a){return 0===o[a]};var a=function(a,e){var n,r,i=e[0],s=e[1],l=e[2],c=0;if(i.some((function(a){return 0!==o[a]}))){for(n in s)t.o(s,n)&&(t.m[n]=s[n]);if(l)var u=l(t)}for(a&&a(e);c<i.length;c++)r=i[c],t.o(o,r)&&o[r]&&o[r][0](),o[r]=0;return t.O(u)},e=self["webpackChunkponto_eletronico"]=self["webpackChunkponto_eletronico"]||[];e.forEach(a.bind(null,0)),e.push=a.bind(null,e.push.bind(e))}();var e=t.O(void 0,[998],(function(){return t(617)}));e=t.O(e)})();
//# sourceMappingURL=app.4ecbec20.js.map