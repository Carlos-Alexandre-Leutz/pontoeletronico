{"ast":null,"code":"import { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { getFirestore, collection, addDoc, serverTimestamp } from \"firebase/firestore\";\nexport default {\n  data() {\n    return {\n      user: null,\n      clockIn: true // True para marcação de entrada, False para marcação de saída\n    };\n  },\n  created() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, user => {\n      this.user = user; // adicionar isso em um vuex\n    });\n  },\n  methods: {\n    async clockInClockOut() {\n      if (!this.user) {\n        console.error(\"Usuário não autenticado. Faça login para usar o ponto eletrônico.\");\n        return;\n      }\n      const db = getFirestore();\n      const pointsCollection = collection(db, \"pontos\");\n      try {\n        // Adiciona um novo registro com a data/hora atual e o tipo de marcação\n        await addDoc(pointsCollection, {\n          userId: this.user.uid,\n          timestamp: serverTimestamp(),\n          type: this.clockIn ? \"Entrada\" : \"Saída\"\n        });\n        console.log(`Marcação de ponto ${this.clockIn ? \"entrada\" : \"saída\"} registrada com sucesso.`);\n\n        // Inverte o estado para a próxima marcação\n        this.clockIn = !this.clockIn;\n      } catch (error) {\n        console.error(\"Erro ao registrar a marcação de ponto:\", error.message);\n      }\n    }\n  }\n};","map":{"version":3,"names":["getAuth","onAuthStateChanged","getFirestore","collection","addDoc","serverTimestamp","data","user","clockIn","created","auth","methods","clockInClockOut","console","error","db","pointsCollection","userId","uid","timestamp","type","log","message"],"sources":["/home/alexandre/code/ponto-eletronico/src/components/ClockInClockOut.vue"],"sourcesContent":["<!-- ClockInClockOut.vue -->\n<template>\n  <div>\n    <h1>Marcação de Ponto Eletrônico</h1>\n    <p v-if=\"user\">Olá, {{ user.displayName }}!</p>\n    <p v-else>Bem-vindo! Faça login para usar o ponto eletrônico.</p>\n\n    <button @click=\"clockInClockOut\">\n      {{ clockIn ? \"Registrar Saída\" : \"Registrar Entrada\" }}\n    </button>\n  </div>\n</template>\n\n<script>\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport {\n  getFirestore,\n  collection,\n  addDoc,\n  serverTimestamp,\n} from \"firebase/firestore\";\n\nexport default {\n  data() {\n    return {\n      user: null,\n      clockIn: true, // True para marcação de entrada, False para marcação de saída\n    };\n  },\n  created() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, (user) => {\n      this.user = user; // adicionar isso em um vuex\n    });\n  },\n  methods: {\n    async clockInClockOut() {\n      if (!this.user) {\n        console.error(\n          \"Usuário não autenticado. Faça login para usar o ponto eletrônico.\"\n        );\n        return;\n      }\n\n      const db = getFirestore();\n      const pointsCollection = collection(db, \"pontos\");\n\n      try {\n        // Adiciona um novo registro com a data/hora atual e o tipo de marcação\n        await addDoc(pointsCollection, {\n          userId: this.user.uid,\n          timestamp: serverTimestamp(),\n          type: this.clockIn ? \"Entrada\" : \"Saída\",\n        });\n\n        console.log(\n          `Marcação de ponto ${\n            this.clockIn ? \"entrada\" : \"saída\"\n          } registrada com sucesso.`\n        );\n\n        // Inverte o estado para a próxima marcação\n        this.clockIn = !this.clockIn;\n      } catch (error) {\n        console.error(\"Erro ao registrar a marcação de ponto:\", error.message);\n      }\n    },\n  },\n};\n</script>\n"],"mappings":"AAcA,SAASA,OAAO,EAAEC,kBAAiB,QAAS,eAAe;AAC3D,SACEC,YAAY,EACZC,UAAU,EACVC,MAAM,EACNC,eAAe,QACV,oBAAoB;AAE3B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,IAAI;MACVC,OAAO,EAAE,IAAI,CAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,MAAMC,IAAG,GAAIV,OAAO,CAAC,CAAC;IACtBC,kBAAkB,CAACS,IAAI,EAAGH,IAAI,IAAK;MACjC,IAAI,CAACA,IAAG,GAAIA,IAAI,EAAE;IACpB,CAAC,CAAC;EACJ,CAAC;EACDI,OAAO,EAAE;IACP,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI,CAAC,IAAI,CAACL,IAAI,EAAE;QACdM,OAAO,CAACC,KAAK,CACX,mEACF,CAAC;QACD;MACF;MAEA,MAAMC,EAAC,GAAIb,YAAY,CAAC,CAAC;MACzB,MAAMc,gBAAe,GAAIb,UAAU,CAACY,EAAE,EAAE,QAAQ,CAAC;MAEjD,IAAI;QACF;QACA,MAAMX,MAAM,CAACY,gBAAgB,EAAE;UAC7BC,MAAM,EAAE,IAAI,CAACV,IAAI,CAACW,GAAG;UACrBC,SAAS,EAAEd,eAAe,CAAC,CAAC;UAC5Be,IAAI,EAAE,IAAI,CAACZ,OAAM,GAAI,SAAQ,GAAI;QACnC,CAAC,CAAC;QAEFK,OAAO,CAACQ,GAAG,CACR,qBACC,IAAI,CAACb,OAAM,GAAI,SAAQ,GAAI,OAC7B,0BACF,CAAC;;QAED;QACA,IAAI,CAACA,OAAM,GAAI,CAAC,IAAI,CAACA,OAAO;MAC9B,EAAE,OAAOM,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAACQ,OAAO,CAAC;MACxE;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}